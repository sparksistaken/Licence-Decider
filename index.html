<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>License Picker</title>
  <style>
    :root {
      --bg1: #1e2122;
      --bg2: #1a1c1d;
      --primary: #3a515e;
      --fg: #cccccc;
    }

    body {
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--bg1);
      margin: 0;
      padding: 2rem;
      color: var(--fg);
      line-height: 1.6;
    }

    #game {
      max-width: 600px;
      margin: 0 auto;
      background: var(--bg2);
      padding: 2rem;
      border-radius: 1rem;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    .question {
      font-size: 1.25rem;
      font-weight: 500;
      margin-bottom: 1.5rem;
    }

    button {
      background-color: var(--primary);
      color: var(--fg);
      border: none;
      border-radius: 0.5rem;
      padding: 0.75rem 1.5rem;
      margin: 0.5rem 0;
      font-size: 1rem;
      transition: background-color 0.2s ease, transform 0.1s ease;
      cursor: pointer;
      width: 100%;
      text-align: center;
    }

    button:hover {
      transform: translateY(-2px);
    }

    button:active {
      transform: translateY(0);
    }

    #result {
      margin-top: 2rem;
      font-size: 1.2rem;
      font-weight: bold;
      text-align: center;
      color: #0f9d58;
    }

    h2 {
      text-align: center;
      color: #0f9d58;
      font-size: 1.75rem;
    }
  </style>
</head>
<body>
  <div id="game">
    <div class="question" id="question"></div>
    <div id="choices"></div>
    <div id="result"></div>
  </div>

<script>
  const questions = [
    {
      question: "Allow use in proprietary/closed-source software?",
      options: ["Yes", "No"],
      next: [1, 7]
    },
    {
      question: "Require people to share changes if they redistribute your code?",
      options: ["Yes", "No"],
      next: [2, 4]
    },
    {
      question: "Should copyleft apply only to modified files (weak copyleft)?",
      options: ["Yes", "No"],
      next: ["MPL 2.0", "LGPL v3"]
    },
    {
      question: "Want patent protection clauses?",
      options: ["Yes", "No"],
      next: ["Apache License 2.0", 5]
    },
    {
      question: "Prefer ultra-simple/no-strings license?",
      options: ["Yes", "No"],
      next: ["MIT License", "BSD 3-Clause License"]
    },
    {
      question: "Prefer a business-friendly or modern license?",
      options: ["Yes", "No"],
      next: ["Blue Oak 1.0.0", 6]
    },
    {
      question: "Want to dedicate code to public domain?",
      options: ["Yes", "No"],
      next: ["CC0", "Unlicense"]
    },
    {
      question: "Require the same license for all derivative works (strong copyleft)?",
      options: ["Yes", "No"],
      next: [8, "LGPL v2.1"]
    },
    {
      question: "Should server/network use require releasing source (e.g., SaaS)?",
      options: ["Yes", "No"],
      next: ["AGPL v3", 9]
    },
    {
      question: "Prefer GPL v3 (patents + anti-Tivo) or GPL v2 (simpler)?",
      options: ["GPL v3", "GPL v2"],
      next: ["GPL v3", "GPL v2"]
    },
    // Additional questions for deeper refinement
    {
      question: "Is ease of understanding by non-lawyers important to you?",
      options: ["Yes", "No"],
      next: ["MIT License", "Apache License 2.0"]
    },
    {
      question: "Do you want to allow commercial use without restrictions?",
      options: ["Yes", "No"],
      next: ["Unlicense", "CC BY-NC"]
    }
  ];

  let current = 0;
  let previousLicenses = [];

  function renderQuestion(index) {
    const q = questions[index];
    document.getElementById("question").innerText = `ðŸ§© ${q.question}`;
    const choicesDiv = document.getElementById("choices");
    choicesDiv.innerHTML = "";
    q.options.forEach((opt, i) => {
      const btn = document.createElement("button");
      btn.innerText = opt;
      btn.onclick = () => handleAnswer(q.next[i]);
      choicesDiv.appendChild(btn);
    });
  }

  function showResult(license) {
    previousLicenses.push(license);
    const gameDiv = document.getElementById("game");
    gameDiv.innerHTML = `
      <h2>ðŸŽ‰ Recommended License: ${license}</h2>
      <div style="text-align: center;">
        <button onclick="refineChoice()">Not for me</button>
      </div>
    `;
  }

  function refineChoice() {
    const extraQuestions = [10, 11]; // indices of additional refinement questions
    current = extraQuestions[Math.floor(Math.random() * extraQuestions.length)];
    renderQuestion(current);
  }

  function handleAnswer(next) {
    if (typeof next === "string") {
      showResult(next);
    } else {
      current = next;
      renderQuestion(current);
    }
  }

  document.addEventListener("DOMContentLoaded", () => {
    renderQuestion(current);
  });
</script>
</body>
</html>
